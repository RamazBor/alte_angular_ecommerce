import './polyfills.server.mjs';
import{Ba as v,Ca as I,D as n,H as f,I as d,La as S,Nb as j,Q as g,eb as y,h as m,la as b,qa as k,w as c,xb as l,yb as T,z as s}from"./chunk-PLTTMXMG.mjs";import{a as p,b as h}from"./chunk-VVCT4QZE.mjs";var U=["alte-button",""],A=["*"],F=(()=>{let r=class r{constructor(){this.size="default",this.theme="primary",this.block=!1}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=d({type:r,selectors:[["button","alte-button",""],["a","alte-button",""]],hostAttrs:[1,"alte-button"],hostVars:20,hostBindings:function(e,i){e&2&&k("alte-button--default",i.size==="default")("alte-button--small",i.size==="small")("alte-button--extra-small",i.size==="extra-small")("alte-button--primary",i.theme==="primary")("alte-button--outline",i.theme==="outline")("alte-button--icon",i.theme==="icon")("alte-button--outline-icon",i.theme==="outline-icon")("alte-button--outline-black",i.theme==="outline-black")("alte-button--link",i.theme==="link")("alte-button--block",i.block)},inputs:{size:"size",theme:"theme",block:[f.HasDecoratorInputTransform,"block","block",y]},standalone:!0,features:[b,S],attrs:U,ngContentSelectors:A,decls:1,vars:0,template:function(e,i){e&1&&(v(),I(0))},encapsulation:2});let o=r;return o})();var a={firebaseAuthUrl:"https://identitytoolkit.googleapis.com/v1",firebaseUrl:"https://alte-ecommerce2024-default-rtdb.europe-west1.firebasedatabase.app/",firebaseApiKey:"AIzaSyAopkvghq8Gh-JOjKXGdVgrTbU_-oQP0ts"};var w=(()=>{let r=class r{constructor(){this.apiUrl=a.firebaseUrl,this.http=n(T)}get(t,e){let i=new l({fromObject:e});return this.http.get(`${this.apiUrl}/${t}`,{params:i})}post(t,e){return this.http.post(`${this.apiUrl}/${t}`,e)}put(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}delete(t,e){let i=new l({fromObject:e});return this.http.delete(`${this.apiUrl}/${t}`,{params:i})}};r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var P=(()=>{let r=class r{setItem(t,e){localStorage.setItem(t,JSON.stringify(e))}getItem(t){let e=localStorage.getItem(t);return e?JSON.parse(e):null}removeItem(t){localStorage.removeItem(t)}clear(){localStorage.clear()}};r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var $=(()=>{let r=class r extends w{constructor(){super(...arguments),this.apiUrl=a.firebaseAuthUrl,this.apiKey=a.firebaseApiKey}register(t){return this.post(`accounts:signUp?key=${this.apiKey}`,t)}login(t){return this.post(`accounts:signInWithPassword?key=${this.apiKey}`,h(p({},t),{returnSecureToken:!0}))}sendOobCode(t){return this.post(`accounts:sendOobCode?key=${this.apiKey}`,{requestType:"PASSWORD_RESET",email:t})}resetPassword(t,e){return this.post(`accounts:resetPassword?key=${this.apiKey}`,{oobCode:t,newPassword:e})}lookup(t){return this.post(`accounts:lookup?key=${this.apiKey}`,{idToken:t})}changePassword(t,e){return this.post(`accounts:update?key=${this.apiKey}`,{idToken:t,password:e,returnSecureToken:!0})}};r.\u0275fac=(()=>{let t;return function(i){return(t||(t=g(r)))(i||r)}})(),r.\u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var et=(()=>{let r=class r{constructor(){this.authService=n($),this.storageService=n(P),this.router=n(j)}get isAuthenticated(){return!!this.storageService.getItem("token")}get token(){return this.storageService.getItem("token")}get refreshToken(){return this.storageService.getItem("refreshToken")}get user(){return this.storageService.getItem("user")}register(t){return this.authService.register(t).pipe(c(e=>{this.storageService.setItem("token",e.idToken),this.storageService.setItem("refreshToken",e.refreshToken),this.storageService.setItem("user",{email:e.email,id:e.localId})}))}login(t){return this.authService.login(t).pipe(c(e=>{this.storageService.setItem("token",e.idToken),this.storageService.setItem("refreshToken",e.refreshToken),this.storageService.setItem("user",{email:e.email,id:e.localId})}))}sendOobCode(t){return this.authService.sendOobCode(t)}resetPassword(t,e){return this.authService.resetPassword(t,e)}logout(){this.storageService.clear(),this.router.navigate(["/"])}getUser(){return this.authService.lookup(this.token).pipe(m(t=>t.users.length?t.users[0]:{}))}changePassword(t){return this.authService.changePassword(this.token,t).pipe(c(e=>{this.storageService.setItem("token",e.idToken),this.storageService.setItem("refreshToken",e.refreshToken),this.storageService.setItem("user",{email:e.email,id:e.localId})}))}};r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();export{w as a,F as b,et as c};
